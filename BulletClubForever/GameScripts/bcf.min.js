function createRandom(n){return Math.floor(Math.random()*n+1)}function createRandomBool(n){var t=createRandom(n);return t===1}function preload(){platforms.preload();bullets.preload();player.preload()}function create(){game.stage.backgroundColor="#66CCFF";game.physics.startSystem(Phaser.Physics.ARCADE);platforms.create();bullets.create();player.create()}function update(){player.update(platforms,bullets);platforms.update();bullets.update();doScrolling()}function render(){this.game.debug.text("Number of bullets: "+bullets.group.length,32,32);this.game.debug.text("Player direction: "+player.shootDirection,432,32)}function doScrolling(){var t=maxXValueForPlayer-player.playerSprite.x,n;t<-1&&(n=Math.floor(t)+1,this.player.playerSprite.x+=n,this.player.previousDistance=this.player.playerSprite.x,this.platforms.group.forEachAlive(function(t){t.x+=n}),this.platforms.tilesArray.forEach(function(t){t.x+=n}),this.platforms.scrollingTracker+=-n)}Bullets=function(n){this.game=n;this.group=null;this.SPEED=3};Bullets.prototype.preload=function(){this.game.load.image("bullet","Sprites/bullet.png")};Bullets.prototype.update=function(){var n=this;this.group.forEachAlive(function(t){var i=n.determineDirectionOfSprite(t);t.x+=i.x;t.y+=i.y;t.x+=i.x;t.y+=i.y;t.x+=i.x;t.y+=i.y})};Bullets.prototype.create=function(){this.group=this.game.add.group();this.group.enableBody=!0};Bullets.prototype.shoot=function(n){var i=n.playerSprite.x,r=n.playerSprite.y,t=this.group.getFirstDead();t!=null?(t.revive(),t.x=i,t.y=r):t=this.group.create(i,r,"bullet");t.body.facing=n.shootDirection;t.checkWorldBounds=!0;t.outOfBoundsKill=!0};Bullets.prototype.determineDirectionOfSprite=function(n){return n.body.facing===1?new Direction(0,-this.SPEED):n.body.facing===2?new Direction(this.SPEED,-this.SPEED):n.body.facing===3?new Direction(this.SPEED,0):n.body.facing===4?new Direction(this.SPEED,this.SPEED):n.body.facing===5?new Direction(0,this.SPEED):n.body.facing===6?new Direction(-this.SPEED,this.SPEED):n.body.facing===7?new Direction(-this.SPEED,0):n.body.facing===8?new Direction(-this.SPEED,-this.SPEED):void 0};Direction=function(n,t){this.x=n;this.y=t};Player=function(n){this.game=n;this.MAXSPEED=150;this.ACCELLERATION=300;this.JUMPSPEED=400;this.GRAVITY=1200;this.SHOOT_FREQUENCY=10;this.playerSprite=null;this.keyboard=null;this.cursorKeys=null;this.shootDirection=3;this.jumpWasReleaseSinceLastPressed=!1;this.previousDistance=0;this.shootingCount=0};Player.prototype.preload=function(){this.game.load.image("player","Sprites/player.png")};Player.prototype.create=function(){this.playerSprite=this.game.add.sprite(0,445,"player");this.game.physics.arcade.enable(this.playerSprite);this.playerSprite.body.collideWorldBounds=!0;this.playerSprite.body.setSize(12,25,6,0);this.playerSprite.body.gravity.y=this.GRAVITY;this.playerSprite.body.maxVelocity.setTo(this.MAXSPEED,this.JUMPSPEED);this.keyboard=this.game.input.keyboard;this.cursorKeys=this.keyboard.createCursorKeys()};Player.prototype.update=function(n,t){var i=this,r;i.game.physics.arcade.collide(i.playerSprite,n.group);this.cursorKeys.right.isDown?this.playerSprite.body.acceleration.x=this.ACCELLERATION:this.cursorKeys.left.isDown?this.playerSprite.body.acceleration.x=-this.ACCELLERATION:(this.playerSprite.body.acceleration.x=0,this.playerSprite.body.velocity.x=0);r=this.playerSprite.body.touching.down;r&&this.jumpWasReleaseSinceLastPressed&&this.keyboard.isDown(Phaser.Keyboard.X)&&(this.playerSprite.body.velocity.y=-this.JUMPSPEED,this.jumpWasReleaseSinceLastPressed=!1);this.keyboard.isDown(Phaser.Keyboard.X)||(this.jumpWasReleaseSinceLastPressed=!0);this.setShootDirection();this.keyboard.isDown(Phaser.Keyboard.Z)?(this.shootingCount%10==0&&t.shoot(this),this.shootingCount++):this.shootingCount=0;this.totalDistance+=this.playerSprite.x-this.previousDistance;this.previousDistance=this.playerSprite.x};Player.prototype.setShootDirection=function(){this.keyboard.isDown(Phaser.Keyboard.Z)||(this.cursorKeys.right.isDown&&this.cursorKeys.up.isDown?this.shootDirection=2:this.cursorKeys.right.isDown&&this.cursorKeys.down.isDown?this.shootDirection=4:this.cursorKeys.left.isDown&&this.cursorKeys.up.isDown?this.shootDirection=8:this.cursorKeys.left.isDown&&this.cursorKeys.down.isDown?this.shootDirection=6:this.cursorKeys.up.isDown?this.shootDirection=1:this.cursorKeys.right.isDown?this.shootDirection=3:this.cursorKeys.down.isDown?this.shootDirection=5:this.cursorKeys.left.isDown&&(this.shootDirection=7))};Platforms=function(n){this.game=n;this.group=null;this.tilesArray=[];this.tileBuffer=-5;this.scrollingTracker=0};Platforms.prototype.preload=function(){this.game.load.image("platform","Sprites/platform.png")};Platforms.prototype.create=function(){var t,i,n,r;for(this.group=this.game.add.group(),this.group.enableBody=!0,t=WINDOW_WIDTH/TILE_WIDTH+this.tileBuffer,i=WINDOW_HEIGHT/TILE_HEIGHT,n=0;n<t;n++)r=this.createNewPlatformsColumn(n*TILE_WIDTH,i),this.tilesArray.push(r)};Platforms.prototype.update=function(){if(this.scrollingTracker>=TILE_WIDTH){this.tilesArray[0].array.forEach(function(n){n.kill()});this.tilesArray.shift();var n=this.tilesArray[this.tilesArray.length-1].x,t=this.createNewPlatformsColumn(n+TILE_WIDTH,WINDOW_HEIGHT/TILE_HEIGHT);this.tilesArray.push(t);this.scrollingTracker-=TILE_WIDTH}};Platforms.prototype.createNewPlatformsColumn=function(n,t){for(var u,f,i=[],r=2;r<t-1;r++)u=createRandomBool(20),u&&i.push(this.createPlatformSprite(n,r*TILE_HEIGHT));return f=!0,f&&i.push(this.createPlatformSprite(n,(t-1)*TILE_HEIGHT)),new PlatformColumn(n,i)};Platforms.prototype.createPlatformSprite=function(n,t){var i=this.group.getFirstDead(),r;return i!=null?(i.revive(),i.x=n,i.y=t,i):(r=this.group.create(n,t,"platform"),r.body.immovable=!0,r.body.checkCollision={up:!0,down:!1,left:!1,right:!1},r)};PlatformColumn=function(n,t){this.x=n;this.array=t};var TILE_WIDTH=25,TILE_HEIGHT=25,WINDOW_WIDTH=800,WINDOW_HEIGHT=500,maxXValueForPlayer=275,game=new Phaser.Game(WINDOW_WIDTH,WINDOW_HEIGHT,Phaser.AUTO,"game",{preload:preload,create:create,update:update,render:render}),platforms=new Platforms(game),bullets=new Bullets(game),player=new Player(game);
//# sourceMappingURL=bcf.min.js.map
