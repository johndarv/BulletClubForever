function createRandom(n){return Math.floor(Math.random()*n+1)}function createRandomBool(n){var t=createRandom(n);return t===1}function createRandom(n){return Math.floor(Math.random()*n+1)}function createRandomBool(n){var t=createRandom(n);return t===1}function preload(){platforms.preload();player.preload()}function create(){game.stage.backgroundColor="#66CCFF";game.physics.startSystem(Phaser.Physics.ARCADE);platforms.create();player.create()}function update(){player.update(platforms);platforms.update();doScrolling()}function render(){}function doScrolling(){var t=maxXValueForPlayer-player.playerSprite.x,n;t<-1&&(n=Math.floor(t)+1,this.player.playerSprite.x+=n,this.player.previousDistance=this.player.playerSprite.x,this.platforms.group.forEachAlive(function(t){t.x+=n}),this.platforms.tilesArray.forEach(function(t){t.x+=n}),this.platforms.scrollingTracker+=-n)}LevelMap=function(n,t){this.map=[];this.x=n;this.y=t};LevelMap.prototype.init=function(){for(var t,n=0;n<this.x;n++)for(this.map[n]=[],t=0;t<this.y;t++)this.map[n][t]=".";this.initPlatforms();this.overrideFirstPlatform()};LevelMap.prototype.initPlatforms=function(){for(var n=0;n<this.x;n++)this.makePieceOfMap(n)};LevelMap.prototype.overrideFirstPlatform=function(){this.map[0][this.y-1]="G"};LevelMap.prototype.addNewPieceOfMap=function(){this.map[this.x]=[];this.makePieceOfMap(this.x);this.x++};LevelMap.prototype.makePieceOfMap=function(n){var f=!createRandomBool(9),u=".",t,i,r;for(f&&(u="G"),this.map[n][this.y-1]=u,t=0;t<this.y-1;t++)i=createRandomBool(20),t<2&&(i=!1),r=".",i&&(r="P"),this.map[n][t]=r};Player=function(n){this.game=n;this.MAXSPEED=150;this.ACCELLERATION=300;this.JUMPSPEED=400;this.GRAVITY=1200;this.playerSprite=null;this.keyboard=null;this.cursorKeys=null;this.jumpWasReleaseSinceLastPressed=!1;this.previousDistance=0};Player.prototype.preload=function(){this.game.load.image("player","Sprites/player.png")};Player.prototype.create=function(){this.playerSprite=this.game.add.sprite(0,445,"player");this.game.physics.arcade.enable(this.playerSprite);this.playerSprite.body.collideWorldBounds=!0;this.playerSprite.body.setSize(12,25,6,0);this.playerSprite.body.gravity.y=this.GRAVITY;this.playerSprite.body.maxVelocity.setTo(this.MAXSPEED,this.JUMPSPEED);this.keyboard=this.game.input.keyboard;this.cursorKeys=this.keyboard.createCursorKeys()};Player.prototype.update=function(n){var t=this,i;t.game.physics.arcade.collide(t.playerSprite,n.group);this.cursorKeys.right.isDown?this.playerSprite.body.acceleration.x=this.ACCELLERATION:this.cursorKeys.left.isDown?this.playerSprite.body.acceleration.x=-this.ACCELLERATION:(this.playerSprite.body.acceleration.x=0,this.playerSprite.body.velocity.x=0);i=this.playerSprite.body.touching.down;i&&this.jumpWasReleaseSinceLastPressed&&this.keyboard.isDown(Phaser.Keyboard.X)&&(this.playerSprite.body.velocity.y=-this.JUMPSPEED,this.jumpWasReleaseSinceLastPressed=!1);this.keyboard.isDown(Phaser.Keyboard.X)||(this.jumpWasReleaseSinceLastPressed=!0);this.totalDistance+=this.playerSprite.x-this.previousDistance;this.previousDistance=this.playerSprite.x};Platforms=function(n){this.game=n;this.group=null;this.tilesArray=[];this.tileBuffer=-5;this.scrollingTracker=0};Platforms.prototype.preload=function(){this.game.load.image("platform","Sprites/platform.png")};Platforms.prototype.create=function(){var t,i,n,r;for(this.group=this.game.add.group(),this.group.enableBody=!0,t=WINDOW_WIDTH/TILE_WIDTH+this.tileBuffer,i=WINDOW_HEIGHT/TILE_HEIGHT,n=0;n<t;n++)r=this.createNewPlatformsColumn(n*TILE_WIDTH,i),this.tilesArray.push(r)};Platforms.prototype.update=function(){if(this.scrollingTracker>=TILE_WIDTH){this.tilesArray[0].array.forEach(function(n){n.kill()});this.tilesArray.shift();var n=this.tilesArray[this.tilesArray.length-1].x,t=this.createNewPlatformsColumn(n+TILE_WIDTH,WINDOW_HEIGHT/TILE_HEIGHT);this.tilesArray.push(t);this.scrollingTracker-=TILE_WIDTH}};Platforms.prototype.createNewPlatformsColumn=function(n,t){for(var u,f,i=[],r=2;r<t-1;r++)u=createRandomBool(20),u&&i.push(this.createPlatformSprite(n,r*TILE_HEIGHT));return f=!0,f&&i.push(this.createPlatformSprite(n,(t-1)*TILE_HEIGHT)),new PlatformColumn(n,i)};Platforms.prototype.createPlatformSprite=function(n,t){var i=this.group.getFirstDead(),r;return i!=null?(i.revive(),i.x=n,i.y=t,i):(r=this.group.create(n,t,"platform"),r.body.immovable=!0,r.body.checkCollision={up:!0,down:!1,left:!1,right:!1},r)};PlatformColumn=function(n,t){this.x=n;this.array=t};var TILE_WIDTH=25,TILE_HEIGHT=25,WINDOW_WIDTH=800,WINDOW_HEIGHT=500,maxXValueForPlayer=275,game=new Phaser.Game(WINDOW_WIDTH,WINDOW_HEIGHT,Phaser.AUTO,"game",{preload:preload,create:create,update:update,render:render}),platforms=new Platforms(game),player=new Player(game);
//# sourceMappingURL=bcf.min.js.map
